
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Polyflow is an open-source framework for creation of process platform with one or multiple process engines (like Camunda BPM) providing a holistic enterprise-wide task pool and data entry pool.">
      
      
        <meta name="author" content="Holisticon BPM Craftsman">
      
      
        <link rel="canonical" href="https://www.holunda.io/camunda-bpm-taskpool/3.14.1/reference-guide/components/camunda-taskpool-collector.html">
      
      
        <link rel="prev" href="camunda-interaction-client.html">
      
      
        <link rel="next" href="camunda-starter.html">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.16">
    
    
      
        <title>Taskpool Collector - Polyflow</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="polyflow" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#purpose" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="Polyflow" class="md-header__button md-logo" aria-label="Polyflow" data-md-component="logo">
      
  <img src="../../assets/img/logo-negative.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Polyflow
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Taskpool Collector
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="polyflow" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/holunda-io/camunda-bpm-taskpool/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    holunda-io/camunda-bpm-taskpool
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../index.html" class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../introduction/index.html" class="md-tabs__link">
        Introduction
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../getting-started/index.html" class="md-tabs__link">
      Getting Started
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link md-tabs__link--active">
        Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/index.html" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../developer-guide/contribution.html" class="md-tabs__link">
        Developers
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Polyflow" class="md-nav__button md-logo" aria-label="Polyflow" data-md-component="logo">
      
  <img src="../../assets/img/logo-negative.svg" alt="logo">

    </a>
    Polyflow
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/holunda-io/camunda-bpm-taskpool/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    holunda-io/camunda-bpm-taskpool
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/index.html" class="md-nav__link">
        Motivation and Goal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/concepts.html" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/features.html" class="md-nav__link">
        Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/solution-architecture.html" class="md-nav__link">
        Solution Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/deployment.html" class="md-nav__link">
        Deployment Strategies
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/index.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Reference Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Component Overview
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          Integration Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Integration Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="camunda-interaction-client.html" class="md-nav__link">
        Camunda BPM Engine Interaction Client
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Camunda BPM Engine Taskpool Collector
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="camunda-taskpool-collector.html" class="md-nav__link md-nav__link--active">
        Camunda BPM Engine Taskpool Collector
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    Purpose
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    Architecture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-and-configuration" class="md-nav__link">
    Usage and configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event-collection" class="md-nav__link">
    Event collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-commands-enrichment" class="md-nav__link">
    Task commands enrichment
  </a>
  
    <nav class="md-nav" aria-label="Task commands enrichment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-variable-enrichment" class="md-nav__link">
    Process variable enrichment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-correlation" class="md-nav__link">
    Data Correlation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-codes" class="md-nav__link">
    Message codes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-assignment" class="md-nav__link">
    Task Assignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-importer" class="md-nav__link">
    Task Importer
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="camunda-starter.html" class="md-nav__link">
        Camunda BPM Engine Taskpool SpringBoot Starter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="common-taskpool-sender.html" class="md-nav__link">
        Taskpool Sender
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="common-datapool-sender.html" class="md-nav__link">
        Datapool Sender
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
          Core Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Core Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="core-taskpool.html" class="md-nav__link">
        Taskpool Core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="core-datapool.html" class="md-nav__link">
        Datapool Core
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
      
      
      
        <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
          View Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          View Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="view-api.html" class="md-nav__link">
        View API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="view-api-client.html" class="md-nav__link">
        View API Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="view-form-url-resolver.html" class="md-nav__link">
        Form URL Resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="view-simple.html" class="md-nav__link">
        In-Memory View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="view-jpa.html" class="md-nav__link">
        JPA View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="view-mongo.html" class="md-nav__link">
        Mongo DB View
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
      
      
      
        <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
          Other Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Other Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="other-tasklist-url-resolver.html" class="md-nav__link">
        Tasklist URL Resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="other-variable-serializer.html" class="md-nav__link">
        Variable Serializer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="other-bus-jackson.html" class="md-nav__link">
        Bus Jackson
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/index.html" class="md-nav__link">
        Configuration Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
      
      
      
        <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_8">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/view-mongo.html" class="md-nav__link">
        Mongo DB View Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/persistence.html" class="md-nav__link">
        Persistence Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/core-datapool-aggregate-tuning.html" class="md-nav__link">
        Datapool Aggregate Tuning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/local-core-deployment.html" class="md-nav__link">
        Deployment of Core inside Process applications
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/index.html" class="md-nav__link">
        Examples Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example-approval.html" class="md-nav__link">
        Example Approval
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          Example Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Example Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example-components/index.html" class="md-nav__link">
        Example Components Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example-components/pa-frontend.html" class="md-nav__link">
        Process Application Frontend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example-components/pa-backend.html" class="md-nav__link">
        Process Application Backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example-components/user-management.html" class="md-nav__link">
        User Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example-components/pp-frontend.html" class="md-nav__link">
        Process Platform Frontend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example-components/pp-backend.html" class="md-nav__link">
        Process Platform Backend
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          Distribution Scenarios
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Distribution Scenarios
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/scenarios/index.html" class="md-nav__link">
        Scenarios Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/scenarios/single-node.html" class="md-nav__link">
        Single Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/scenarios/distributed-axon-server.html" class="md-nav__link">
        Distributed using Axon Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/scenarios/distributed-axon-server-local.html" class="md-nav__link">
        Distributed using Axon Server Event Bus only
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/scenarios/distributed-with-kafka.html" class="md-nav__link">
        Distributed using Kafka
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Developers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Developers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/contribution.html" class="md-nav__link">
        Contribution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/project-setup.html" class="md-nav__link">
        Project Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Camunda BPM Engine Taskpool Collector</h1>

<h3 id="purpose">Purpose<a class="headerlink" href="#purpose" title="Permanent link">#</a></h3>
<p>Taskpool Collector is a component deployed as a part of the process application
(aside with Camunda BPM Engine) that is responsible for collecting information from
the Camunda BPM Engine. It detects the <em>intent</em> of the operations executed inside the engine
and creates the corresponding commands for the Taskpool. The commands are enriched with data and transmitted to
other Taskpool components (via Command Bus).</p>
<p>In the following description, we use the terms <em>event</em> and <em>command</em>. Event denotes an entity
received from Camunda BPM Engine (from delegate event listener or from history event listener)
which is passed over to the Taskpool Collector using internal <strong>Spring eventing</strong> mechanism. The Taskpool
Collector converts the series of such events into a Taskpool Command - an entity carrying an intent
of change inside the Taskpool core. Please note that <em>event</em> has another meaning in CQRS/ES systems
and other components of the Taskpool, but in the context of Taskpool Collector an event always originates from
Spring eventing.</p>
<h3 id="features">Features<a class="headerlink" href="#features" title="Permanent link">#</a></h3>
<ul>
<li>Collection of process definitions</li>
<li>Collection of process instance events</li>
<li>Collection of process variable change events</li>
<li>Collection of task events and history events</li>
<li>Creation of task engine commands</li>
<li>Collection of tasks assignment information</li>
<li>Enrichment of task engine commands with process variables</li>
<li>Attachment of correlation information to task engine commands</li>
<li>Transmission of commands to Axon command bus</li>
<li>Provision of properties for process application</li>
</ul>
<h3 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">#</a></h3>
<p><img alt="Taskpool collector building blocks" src="../../img/collector-building-blocks.png" /></p>
<p>The Taskpool Collector consists of several components which can be divided into the following groups:</p>
<ul>
<li>Event collectors services are responsible for gathering information and forming commands</li>
<li>Processors are performing command manipulation (e.g. command enrichment with payload and data correlation)</li>
<li>Command senders are part of <code>command-sender</code> component and are responsible for accumulating commands and sending them to Axon Command List Gateway</li>
</ul>
<h3 id="usage-and-configuration">Usage and configuration<a class="headerlink" href="#usage-and-configuration" title="Permanent link">#</a></h3>
<p>In order to enable collector component, include the Maven dependency to your process application:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">  </span><span class="nt">&lt;groupId&gt;</span>io.holunda.polyflow
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>
<span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>polyflow-camunda-bpm-taskpool-collector<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">      </span><span class="nt">&lt;version&gt;</span>${camunda-taskpool.version}<span class="nt">&lt;/version&gt;</span>
<span class="w">      </span><span class="nt">&lt;dependency&gt;</span>
</code></pre></div>
<p>Then activate the Taskpool Collector by providing the annotation on any Spring Configuration:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="nd">@Import</span><span class="p">(</span><span class="n">CamundaTaskpoolCollectorConfiguration</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">MyProcessApplicationConfiguration</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>
</code></pre></div>
<h3 id="event-collection">Event collection<a class="headerlink" href="#event-collection" title="Permanent link">#</a></h3>
<p>By default, Taskpool Collector registers Spring Event Listener to the following events, fired by Camunda Eventing Engine Plugin:</p>
<ul>
<li><code>DelegateTask</code> events:
  <strong> create
  </strong> update 
  <strong> delete
  </strong> complete</li>
<li><code>HistoryEvent</code> events:
  <strong> HistoricTaskInstanceEvent
  </strong> HistoricIdentityLinkLogEvent
  <strong> HistoricProcessInstanceEventEntity
  </strong> HistoricVariableUpdateEventEntity
  ** HistoricDetailVariableInstanceUpdateEntity</li>
</ul>
<p>The events are transformed into corresponding commands and passed over to the processor layer. Until Camunda Platform 7.19, the eventing
is fired using custom listeners only and polyflow components don't rely on that but rather on own implementation of built-in (unskippable) listeners.
For this purpose, it is important to disable Camunda Platform custom listeners by setting <code>camunda.bpm.eventing.task</code> property to <code>false</code>.   </p>
<p>During collection of task information, you can control which listeners are registered. By default, all listeners are considered but you can change
this behaviour by setting values of two properties:</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">polyflow</span><span class="p">:</span>
<span class="w">  </span><span class="nt">integration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">collector</span><span class="p">:</span>
<span class="w">      </span><span class="nt">camunda</span><span class="p">:</span>
<span class="w">        </span><span class="nt">task</span><span class="p">:</span>
<span class="w">          </span><span class="nt">excludedTaskEventNames</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assignment, delete</span>
<span class="w">          </span><span class="nt">excludedHistoryEventNames</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add-identity-link, delete-identity-link</span>
</code></pre></div>
This particular setting is helpful, if you want to disable assignment in the engine entirely and want to provide you own custom task assignment algorithm or
use assignment based on process variables (see below for more details).</p>
<h3 id="task-commands-enrichment">Task commands enrichment<a class="headerlink" href="#task-commands-enrichment" title="Permanent link">#</a></h3>
<p>Alongside with attributes received from the Camunda BPM engine, the engine task commands
can be enriched with additional attributes.</p>
<p>There are three enrichment modes available controlled by the <code>polyflow.integration.collector.camunda.task.enricher.type</code> property:</p>
<ul>
<li><code>no</code>: No enrichment takes place</li>
<li><code>process-variables</code>: Enrichment of engine task commands with process variables</li>
<li><code>custom</code>: User provides own implementation</li>
</ul>
<h4 id="process-variable-enrichment">Process variable enrichment<a class="headerlink" href="#process-variable-enrichment" title="Permanent link">#</a></h4>
<p>In particular cases, the data enclosed into task attributes is not sufficient for the task list or other user-related components. The information may be
available as process variables and need to be attached to the task in the taskpool. This is where <em>Process Variable Task Enricher</em> can be used. For this
purpose, active it, setting the property <code>polyflow.integration.collector.camunda.task.enricher.type</code> to <code>process-variables</code> and the enricher will
put process variables into the task payload.</p>
<p>You can control what variables will be put into task command payload by providing the Process Variables Filter.
The <code>ProcessVariablesFilter</code> is a Spring bean holding a list of individual <code>VariableFilter</code> - at most one per
process definition key and optionally one without process definition key (a global filter). If the filter is not provded,
a default filter is used which is an empty <code>EXCLUDE</code> filter, resulting in all process variables being attached to the user task.</p>
<p>A <code>VariableFilter</code> can be of the following type:</p>
<ul>
<li><code>TaskVariableFilter</code>:
  <strong> <code>INCLUDE</code>: task-level include filter, denoting a list of variables to be added for the task defined in the filter.
  </strong> <code>EXCLUDE</code>: task-level exclude filter, denoting a list of variables to be ignored for the task defined in the filter. All other variables are included.</li>
<li><code>ProcessVariableFilter</code> with process definition key:
  <strong> <code>INCLUDE</code>: process-level include filter, denoting a list of variables to be added for all tasks of the process.
  </strong> <code>EXCLUDE</code>: process-level exclude filter, denoting a list of variables to be ignored for all tasks of the process.</li>
<li><code>ProcessVariableFilter</code> <em>without</em> process definition key:
  <strong> <code>INCLUDE</code>: global include filter, denoting a list of variables to be added for all tasks of all processes for which no dedicated <code>ProcessVariableFilter</code> is
  defined.
  </strong> <code>EXCLUDE</code>: global exclude filter, denoting a list of variables to be ignored for all tasks of all processes for which no dedicated <code>ProcessVariableFilter</code>
  is defined.</li>
</ul>
<p>Here is an example, how the process variable filter can configure the enrichment:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTaskCollectorConfiguration</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="nd">@Bean</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">ProcessVariablesFilter</span><span class="w"> </span><span class="nf">myProcessVariablesFilter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProcessVariablesFilter</span><span class="p">(</span>
<span class="w">      </span><span class="c1">// define a variable filter for every process</span>
<span class="w">      </span><span class="k">new</span><span class="w"> </span><span class="n">VariableFilter</span><span class="o">[]</span><span class="p">{</span>
<span class="w">        </span><span class="c1">// define for every process definition</span>
<span class="w">        </span><span class="c1">// either a TaskVariableFilter or ProcessVariableFilter</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">TaskVariableFilter</span><span class="p">(</span>
<span class="w">          </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">KEY</span><span class="p">,</span>
<span class="w">          </span><span class="c1">// filter type</span>
<span class="w">          </span><span class="n">FilterType</span><span class="p">.</span><span class="na">INCLUDE</span><span class="p">,</span>
<span class="w">          </span><span class="n">ImmutableMap</span><span class="p">.</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="n">builder</span><span class="p">()</span>
<span class="w">                      </span><span class="c1">// define a variable filter for every task of the process</span>
<span class="w">                      </span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Elements</span><span class="p">.</span><span class="na">APPROVE_REQUEST</span><span class="p">,</span><span class="w"> </span><span class="n">Lists</span><span class="p">.</span><span class="na">newArrayList</span><span class="p">(</span>
<span class="w">                        </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Variables</span><span class="p">.</span><span class="na">REQUEST_ID</span><span class="p">,</span>
<span class="w">                        </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Variables</span><span class="p">.</span><span class="na">ORIGINATOR</span><span class="p">)</span>
<span class="w">                      </span><span class="p">)</span>
<span class="w">                      </span><span class="c1">// and again</span>
<span class="w">                      </span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Elements</span><span class="p">.</span><span class="na">AMEND_REQUEST</span><span class="p">,</span><span class="w"> </span><span class="n">Lists</span><span class="p">.</span><span class="na">newArrayList</span><span class="p">(</span>
<span class="w">                        </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Variables</span><span class="p">.</span><span class="na">REQUEST_ID</span><span class="p">,</span>
<span class="w">                        </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Variables</span><span class="p">.</span><span class="na">COMMENT</span><span class="p">,</span>
<span class="w">                        </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Variables</span><span class="p">.</span><span class="na">APPLICANT</span><span class="p">)</span>
<span class="w">                      </span><span class="p">).</span><span class="na">build</span><span class="p">()</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">        </span><span class="c1">// optionally add a global filter for all processes</span>
<span class="w">        </span><span class="c1">// for that no individual filter was created</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">ProcessVariableFilter</span><span class="p">(</span><span class="n">FilterType</span><span class="p">.</span><span class="na">INCLUDE</span><span class="p">,</span>
<span class="w">                                  </span><span class="n">Lists</span><span class="p">.</span><span class="na">newArrayList</span><span class="p">(</span><span class="n">CommonProcessVariables</span><span class="p">.</span><span class="na">CUSTOMER_ID</span><span class="p">))</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to implement a custom enrichment, please provide your own implementation of the interface <code>VariablesEnricher</code>
  (register a Spring Component of the type) and set the property <code>polyflow.integration.collector.camunda.task.enricher.type</code> to <code>custom</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Avoid using a classic Camunda <code>TaskListener</code> which modifies process variables on task creation, since changes of those
  listeners can't be used during task enrichment. A proper way to modify instance or task variables is to implement an ordered Spring
  <code>EventListener</code> listening on <code>DelegateTask</code>, put it before the enricher by providing <code>@Order(TaskEventCollectorService.ORDER - 80)</code> and scope the event listener to 
  the task of your interest using condition: <code>@EventListener(condition = "#delegateTask.taskDefinitionKey.equals('my-task-key') &amp;&amp; #delegateTask.eventName.equals('create')")</code> </p>
</div>
<h3 id="data-correlation">Data Correlation<a class="headerlink" href="#data-correlation" title="Permanent link">#</a></h3>
<p>Apart from task payload attached by the enricher, the so-called <em>Correlation</em> with data entries can
be configured. The data correlation allows to attach one or several references (that is a pair of values <code>entryType</code> and <code>entryId</code>) of
business data entry(ies) to a task. In the projection (which is used for querying of tasks) these correlations are resolved and the
information from business data events can be shown together with task information.</p>
<p>The correlation to data events can be configured by providing a <code>ProcessVariablesCorrelator</code> bean. Here is
an example how this can be done:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Bean</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">processVariablesCorrelator</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProcessVariablesCorrelator</span><span class="p">(</span>
<span class="w">    </span><span class="c1">// define correlation for every process</span>
<span class="w">    </span><span class="n">ProcessVariableCorrelation</span><span class="p">(</span>
<span class="w">      </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">KEY</span><span class="p">,</span>
<span class="w">      </span><span class="n">mapOf</span><span class="p">(</span>
<span class="w">        </span><span class="c1">// define a correlation for every task needed</span>
<span class="w">        </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Elements</span><span class="p">.</span><span class="na">APPROVE_REQUEST</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">mapOf</span><span class="p">(</span>
<span class="w">          </span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Variables</span><span class="p">.</span><span class="na">REQUEST_ID</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">BusinessDataEntry</span><span class="p">.</span><span class="na">REQUEST</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">),</span>
<span class="w">      </span><span class="c1">// define a correlation globally (for the whole process)</span>
<span class="w">      </span><span class="n">mapOf</span><span class="p">(</span><span class="n">ProcessApproveRequest</span><span class="p">.</span><span class="na">Variables</span><span class="p">.</span><span class="na">REQUEST_ID</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">BusinessDataEntry</span><span class="p">.</span><span class="na">REQUEST</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
</code></pre></div>
<p>The process variable correlator holds a list of process variable correlations - one for every process
definition key. Every <code>ProcessVariableCorrelation</code> configures for all tasks or for an individual task by providing a so-called correlation
map. A correlation map is keyed by the name of a process variable inside Camunda Process Engine and holds the type of business data entry as value.</p>
<p>Here is an example. Imagine the process instance is storing the id of an approval request in a process variable called
<code>varRequestId</code>. The system responsible for storing approval requests fires data entry events supplying the
data and using the entry type <code>io.my.approvalRequest</code> and the id of the request as <code>entryId</code>. In order to
create a correlation in task <code>task_approve_request</code> of the <code>process_approval_process</code> we would provide the following configuration
of the correlator:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Bean</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">processVariablesCorrelator</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProcessVariablesCorrelator</span><span class="p">(</span>

<span class="w">    </span><span class="n">ProcessVariableCorrelation</span><span class="p">(</span>
<span class="w">      </span><span class="s">&quot;process_approval_process&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="n">mapOf</span><span class="p">(</span>
<span class="w">        </span><span class="s">&quot;task_approve_request&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">mapOf</span><span class="p">(</span>
<span class="w">          </span><span class="c1">// process variable &#39;varRequestId&#39; holds the id of a data entry of type &#39;io.my.approvalRequest&#39;</span>
<span class="w">          </span><span class="s">&quot;varRequestId&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;io.my.approvalRequest&quot;</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
</code></pre></div>
<p>If the process instance now contains the approval request id <code>"4711"</code> in the process variable <code>varRequestId</code>
and the process reaches the task <code>task_approve_request</code>, the task will get the following correlation created
(here written in JSON):</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;correlations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;entryType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;approvalRequest&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;entryId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4711&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<h3 id="message-codes">Message codes<a class="headerlink" href="#message-codes" title="Permanent link">#</a></h3>
<blockquote>
<p>Please note that the logger root hierarchy is <code>io.holunda.polyflow.taskpool.collector</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>Message Code</th>
<th>Severity</th>
<th align="left">Logger*</th>
<th align="left">Description</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>COLLECTOR-001</code></td>
<td><code>INFO</code></td>
<td align="left"></td>
<td align="left">Task commands will be collected.</td>
<td align="left"></td>
</tr>
<tr>
<td><code>COLLECTOR-002</code></td>
<td><code>INFO</code></td>
<td align="left"></td>
<td align="left">Task commands not be collected.</td>
<td align="left"></td>
</tr>
<tr>
<td><code>COLLECTOR-005</code></td>
<td><code>TRACE</code></td>
<td align="left"><code>.process.definition</code></td>
<td align="left">Sending process definition command: $command</td>
<td align="left"></td>
</tr>
<tr>
<td><code>COLLECTOR-006</code></td>
<td><code>TRACE</code></td>
<td align="left"><code>.process.instance</code></td>
<td align="left">Sending process instance command: $command</td>
<td align="left"></td>
</tr>
<tr>
<td><code>COLLECTOR-007</code></td>
<td><code>TRACE</code></td>
<td align="left"><code>.process.variable</code></td>
<td align="left">Sending process variable command: $command</td>
<td align="left"></td>
</tr>
<tr>
<td><code>COLLECTOR-008</code></td>
<td><code>TRACE</code></td>
<td align="left"><code>.task</code></td>
<td align="left">Sending engine task command: $command.</td>
<td align="left"></td>
</tr>
<tr>
<td><code>ENRICHER-001</code></td>
<td><code>INFO</code></td>
<td align="left"></td>
<td align="left">Task commands will be enriched with process variables.</td>
<td align="left"></td>
</tr>
<tr>
<td><code>ENRICHER-002</code></td>
<td><code>INFO</code></td>
<td align="left"></td>
<td align="left">Task commands will not be enriched.</td>
<td align="left"></td>
</tr>
<tr>
<td><code>ENRICHER-003</code></td>
<td><code>INFO</code></td>
<td align="left"></td>
<td align="left">Task commands will be enriched by a custom enricher.</td>
<td align="left"></td>
</tr>
<tr>
<td><code>ENRICHER-004</code></td>
<td><code>DEBUG</code></td>
<td align="left"><code>.task.enricher</code></td>
<td align="left">Could not enrich variables from running execution ${command.sourceReference.executionId}, since it doesn't exist (anymore).</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h3 id="task-assignment">Task Assignment<a class="headerlink" href="#task-assignment" title="Permanent link">#</a></h3>
<p>User task assignment is a core functionality for every process application fostering task-oriented work. By default, Taskpool Collector uses
information from Camunda User Task and maps that one-to-one to properties of the user task commands. The task attribute
<code>assignee</code>, <code>candidateUsers</code> and <code>candidateGroups</code> are mapped to the corresponding attributes automatically.</p>
<p>To control the task assignment mode you can configure Taskpool Collector using application properties. The property 
<code>polyflow.integration.collector.camunda.task.assigner.type</code> has the following values:</p>
<ul>
<li><code>no</code>: No additional assignment takes place, the Camunda task attributes are used (default)</li>
<li><code>process-variables</code>: Use process variables for assignment information, see below</li>
<li><code>custom</code>: User provides own implementation implementing a bean implementing <code>TaskAssigner</code> interface.</li>
</ul>
<p>If the value is set to <code>process-variables</code>, you can set up a constant mapping defining the process variables carrying the assignment
information. The corresponding properties are:</p>
<div class="highlight"><pre><span></span><code><span class="nt">polyflow</span><span class="p">:</span>
<span class="w">  </span><span class="nt">integration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">collector</span><span class="p">:</span>
<span class="w">      </span><span class="nt">camunda</span><span class="p">:</span>
<span class="w">        </span><span class="nt">task</span><span class="p">:</span>
<span class="w">          </span><span class="nt">assigner</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">process-variables</span>
<span class="w">            </span><span class="nt">assignee</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-assignee-var</span>
<span class="w">            </span><span class="nt">candidateUsers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-candidate-users-var</span><span class="w"> </span>
<span class="w">            </span><span class="nt">candidateGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-candidate-group-var</span>
</code></pre></div>
<h3 id="task-importer">Task Importer<a class="headerlink" href="#task-importer" title="Permanent link">#</a></h3>
<p>Alongside with the event-based Task Collector based on Camunda Eventing, there exists a dedicated service which can query Camunda database for existing
user tasks and publish the results. In order to avoid duplications in tasks, the collected tasks are filtered by a special filter. Currently, you may choose
between the supplied <code>eventstore</code> filter or supply your own <code>custom</code> filter by providing your own implementation of a <code>EngineTaskCommandFilter</code> interface as 
a Spring Bean. If you want to use this task importer facility, you need to activate it first in your application configuration.</p>
<p>The following property block is used for configuration:</p>
<div class="highlight"><pre><span></span><code><span class="nt">polyflow</span><span class="p">:</span>
<span class="w">  </span><span class="nt">integration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">collector</span><span class="p">:</span>
<span class="w">      </span><span class="nt">camunda</span><span class="p">:</span>
<span class="w">        </span><span class="nt">task</span><span class="p">:</span>
<span class="w">          </span><span class="nt">importer</span><span class="p">:</span>
<span class="w">            </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">            </span><span class="nt">task-filter-type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">eventstore</span>
</code></pre></div>
<p>By doing so, the <code>TaskServiceCollectorService</code> Bean is made available and can be used to trigger the import. The <code>eventstore</code> filter is useful in scenarios,
in which the <a href="./core-taskpool">Taskpool Core</a> is deployed on together with Taskpool Collector as part of the Process Application.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">June 19, 2023</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2016 - 2022, Holisticon AG
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://twitter.com/holisticon" target="_blank" rel="noopener" title="Holisticon on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://medium.com/holisticon-consultants/tagged/mpb" target="_blank" rel="noopener" title="Holisticon BPM Craftsmen on Medium" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top", "toc.integrate"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.a51614de.min.js"></script>
      
    
  </body>
</html>