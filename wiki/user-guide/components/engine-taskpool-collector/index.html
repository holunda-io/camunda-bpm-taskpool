<!DOCTYPE html>
<html lang="en">
<head>




<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.18.2-SNAPSHOT"/>
<link rel="icon" href="https://www.holunda.io/camunda-bpm-taskpool/favicon.ico">


<meta name="robots" content="index, follow">



<title>Taskpool Collector</title>


<meta name="description" content="A component for pooling user tasks with business data for high performance queries.">



<link rel="prev" href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-interaction-client">


<link rel="next" href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-datapool-collector">


<script>
    window.site = {"orchidVersion":"0.18.2-SNAPSHOT","baseUrl":"https://www.holunda.io/camunda-bpm-taskpool","environment":"debug","version":"3.0.0"};
</script>





<!-- start:debug info -->

<!-- THEME -->
<!-- Type: BsDoc -->
<!-- Class: com.eden.orchid.bsdoc.BSDocTheme -->

<!-- PAGE -->
<!-- Type: wiki -->
<!-- Class: com.eden.orchid.wiki.pages.WikiPage -->
<!-- Layout: geopattern2, index -->
<!-- Resolved Layout: templates/layouts/geopattern2.peb -->
<!-- Page Template: wiki, page -->
<!-- Resolved Page Template: templates/pages/page.peb -->

<!-- RESOURCE -->
<!-- Class: com.eden.orchid.api.resources.resource.FileResource -->
<!-- Source Filename: wiki/user-guide/components/engine-taskpool-collector.ad -->

<!-- COMPLETE PAGE CONFIGURATION -->
<script>
    window.allData = {"reference":{"path":"wiki/user-guide/components","baseUrl":"https://www.holunda.io/camunda-bpm-taskpool","fileName":"engine-taskpool-collector","extension":"html","usePrettyUrl":true,"link":"https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-taskpool-collector"},"next":{"path":"wiki/user-guide/components","baseUrl":"https://www.holunda.io/camunda-bpm-taskpool","fileName":"engine-datapool-collector","extension":"html","usePrettyUrl":true,"link":"https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-datapool-collector"},"previous":{"path":"wiki/user-guide/components","baseUrl":"https://www.holunda.io/camunda-bpm-taskpool","fileName":"engine-interaction-client","extension":"html","usePrettyUrl":true,"link":"https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-interaction-client"},"description":"","title":"Taskpool Collector"};
</script>

<!-- end:debug info -->




    <!-- start:inject components -->
    
    <!-- end:inject components -->



    <!-- start:inject components -->
    
    <!-- end:inject components -->





<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"  />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"  />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css"  />
<link rel="stylesheet" type="text/css" href="https://www.holunda.io/camunda-bpm-taskpool/BsDoc/b5276d0/assets/css/bsdoc.css"  />
<link rel="stylesheet" type="text/css" href="https://www.holunda.io/camunda-bpm-taskpool/BsDoc/b5276d0/assets/css/orchidSearch.css"  />
<link rel="stylesheet" type="text/css" href="https://www.holunda.io/camunda-bpm-taskpool/assets/css/menu.css"  />
<link rel="stylesheet" type="text/css" href="https://www.holunda.io/camunda-bpm-taskpool/assets/css/asciidoc-admonitionblock.css"  />
<link rel="stylesheet" type="text/css" href="https://rawgit.com/PrismJS/prism-themes/master/themes/prism-darcula.css"  />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/line-numbers/prism-line-numbers.min.css"  />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/line-highlight/prism-line-highlight.min.css"  />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/toolbar/prism-toolbar.min.css"  />
<!-- end:inject styles -->


</head>
<body>




<a class="github-fork-ribbon right-top"
   href="https://github.com/holunda-io/camunda-bpm-taskpool"
   title="Fork me on GitHub">Fork me on GitHub</a>


<header class="navbar navbar-fixed-top bs-docs-nav">
    <div class="container">
        <div class="navbar-header" role="banner">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.holunda.io/camunda-bpm-taskpool">BPM Taskpool</a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <ul class="nav navbar-nav navbar-right">
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Introduction<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/introduction/motivation">Motivation</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/introduction/features">Features</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/introduction/solution">Solution Architecture</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/introduction/further-outlook">Further outlook</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">User Guide<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example">Example Application</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example-components">Example Components</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/scenarios">Usage Scenarios</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/integration-guide">Integration Guide</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components">Taskpool Components</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Developer Guide<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/developer-guide/contribution">Contribution</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/developer-guide/project-setup">Project Setup</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Explore<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/changelog">Changelog</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/license">License</a></li>
                                
                                    <li><a href="https://www.holunda.io/camunda-bpm-taskpool/readme">Project Readme</a></li>
                                
                            </ul>
                        </li>
                    
                
            </ul>
        </nav>
    </div>
</header>


<div id="top"></div>


    <div class="bs-docs-header" id="jumbotron">
        <div class="container">
            <h1 class="home-title">Taskpool Collector</h1>
        </div>
    </div>


<div class="container bs-docs-container">
    <div class="row">
        <div class="col-md-9" role="main">
        <nav aria-label="breadcrumb">
    <ul class="breadcrumb">
    
    
        <li class="breadcrumb-item"><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki">Wiki</a></li>
    
    
    
        <li class="breadcrumb-item"><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide">User Guide</a></li>
    
    
    
        <li class="breadcrumb-item active" aria-current="page">Taskpool Collector</li>
    
    
    </ul>
</nav>
        

        
        
            
    <!-- start:inject components -->
    
        
            
        
            
                
                    
                        <div class="sect1">
<h2 id="_taskpool_collector">Taskpool Collector</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose">Purpose</h3>
<div class="paragraph">
<p>Taskpool Collector is a component deployed as a part of the process application
(aside with Camunda BPM Engine) that is responsible for collecting information from
the Camunda BPM Engine. It detects the <em>intent</em> of the operations executed inside the engine
and creates the corresponding commands for the taskpool. The commands are enriched with data and transmitted to
other taskpool components (via Axon Command Bus).</p>
</div>
<div class="paragraph">
<p>In the following description, we use the terms <em>event</em> and <em>command</em>. Event denotes an entity
received from Camunda BPM Engine (from delegate event listener or from history event listener)
which is passed over to the Taskpool Collector using internal Spring eventing mechanism. The Taskpool
Collector converts the series of such events into a Taskpool Command - an entity carrying an intent
of change inside of the taskpool core. Please note that <em>event</em> has another meaning in CQRS/ES systems
and other components of the taskpool, but in the context of Taskpool collector an event alway originates from
Spring eventing.</p>
</div>
</div>
<div class="sect2">
<h3 id="_features">Features</h3>
<div class="ulist">
<ul>
<li>
<p>Collection of process definitions</p>
</li>
<li>
<p>Collection of process instance events</p>
</li>
<li>
<p>Collection of process variable change events</p>
</li>
<li>
<p>Collection of task events and history events</p>
</li>
<li>
<p>Creation of task engine commands</p>
</li>
<li>
<p>Enrichment of task engine commands with process variables</p>
</li>
<li>
<p>Attachment of correlation information to task engine commands</p>
</li>
<li>
<p>Transmission of commands to Axon command bus</p>
</li>
<li>
<p>Provision of properties for process application</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_architecture">Architecture</h3>
<div class="imageblock">
<div class="content">
<img src="https://www.holunda.io/camunda-bpm-taskpool/assets/media/collector-building-blocks.png" alt="Taskpool collector building blocks">
</div>
</div>
<div class="paragraph">
<p>The Taskpool Collector consists of several components which can be devided into the following groups:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Event collectors receive are responsible for gathering information and form commands</p>
</li>
<li>
<p>Processors performs the command enrichment with payload and data correlation</p>
</li>
<li>
<p>Command senders are responsible for accumulating commands and sending them to Command Gateway</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_usage_and_configuration">Usage and configuration</h3>
<div class="paragraph">
<p>In order to enable collector component, include the Maven dependency to your process application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.holunda.taskpool&lt;groupId&gt;
  &lt;artifactId&gt;camunda-bpm-taskpool-collector&lt;/artifactId&gt;
  &lt;version&gt;${camunda-taskpool.version}&lt;/version&gt;
&lt;dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then activate the taskpool collector by providing the annotation on any Spring Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
@EnableTaskpoolCollector
class MyProcessApplicationConfiguration {

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_collection">Event collection</h3>
<div class="paragraph">
<p>Taskpool Collector registers Spring Event Listener to the following events, fired by Camunda Eventing Engine Plugin:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DelegateTask</code> events:</p>
<div class="ulist">
<ul>
<li>
<p>create</p>
</li>
<li>
<p>assign</p>
</li>
<li>
<p>delete</p>
</li>
<li>
<p>complete</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>HistoryEvent</code> events:</p>
<div class="ulist">
<ul>
<li>
<p>HistoricTaskInstanceEvent</p>
</li>
<li>
<p>HistoricIdentityLinkLogEvent</p>
</li>
<li>
<p>HistoricProcessInstanceEventEntity</p>
</li>
<li>
<p>HistoricVariableUpdateEventEntity</p>
</li>
<li>
<p>HistoricDetailVariableInstanceUpdateEntity</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The events are transformed into corresponding commands and passed over to the processor layer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_task_commands_enrichment">Task commands enrichment</h3>
<div class="paragraph">
<p>Alongside with attributes received from the Camunda BPM engine, the engine task commands
can be enriched with additional attributes.</p>
</div>
<div class="paragraph">
<p>There are three enrichment modes available controlled by the <code>camunda.taskpool.task.collector.enricher.type</code> property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>no</code>: No enrichment takes place</p>
</li>
<li>
<p><code>process-variables</code>: Enrichment of engine task commands with process variables</p>
</li>
<li>
<p><code>custom</code>: User provides own implementation</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_process_variable_enrichment">Process variable enrichment</h4>
<div class="paragraph">
<p>In particular cases, the data enclosed into task attibutes is not sufficient for the task list or other user-related components. The information may be available as process variables and need to be attached to the task in the taskpool. This is where <em>Process Variable Task Enricher</em> can be used. For this purpose, active it setting the property <code>camunda.taskpool.collector.task.enricher.type</code> to <code>process-variables</code> and the enricher will
put process variables into the task payload.</p>
</div>
<div class="paragraph">
<p>You can control what variables will be put into task command payload by providing the Process Variables Filter.
The <code>ProcessVariablesFilter</code> is a Spring bean holding a list of individual <code>VariableFilter</code> - at most one per
process definition key and optionally one without process definition key (a global filter). If the filter is not provded,
a default filter is used which is an empty <code>EXCLUDE</code> filter, resulting in all process variables being attached to the user task.</p>
</div>
<div class="paragraph">
<p>A <code>VariableFilter</code> can be of the following type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TaskVariableFilter</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>INCLUDE</code>: task-level include filter, denoting a list of variables to be added for the task defined in the filter.</p>
</li>
<li>
<p><code>EXCLUDE</code>: task-level exclude filter, denoting a list of variables to be ignored for the task defined in the filter. All other variables are included.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>ProcessVariableFilter</code> with process definition key:</p>
<div class="ulist">
<ul>
<li>
<p><code>INCLUDE</code>: process-level include filter, denoting a list of variables to be added for all tasks of the process.</p>
</li>
<li>
<p><code>EXCLUDE</code>: process-level exclude filter, denoting a list of variables to be ignored for all tasks of the process.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>ProcessVariableFilter</code> <em>without</em> process definition key:</p>
<div class="ulist">
<ul>
<li>
<p><code>INCLUDE</code>: global include filter, denoting a list of variables to be added for all tasks of all processes for which no dedicated <code>ProcessVariableFilter</code> is defined.</p>
</li>
<li>
<p><code>EXCLUDE</code>: global exclude filter, denoting a list of variables to be ignored for all tasks of all processes for which no dedicated <code>ProcessVariableFilter</code> is defined.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example, how the process variable filter can configure the enrichment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  @Configuration
  public class MyTaskCollectorConfiguration {

    @Bean
    public ProcessVariablesFilter myProcessVariablesFilter() {

      return new ProcessVariablesFilter(
        // define a variable filter for every process
        new VariableFilter[]{
          // define for every process definition
          // either a TaskVariableFilter or ProcessVariableFilter
          new TaskVariableFilter(
            ProcessApproveRequest.KEY,
            // filter type
            FilterType.INCLUDE,
            ImmutableMap.&lt;String, List&lt;String&gt;&gt;builder()
              // define a variable filter for every task of the process
              .put(ProcessApproveRequest.Elements.APPROVE_REQUEST, Lists.newArrayList(
                ProcessApproveRequest.Variables.REQUEST_ID,
                ProcessApproveRequest.Variables.ORIGINATOR)
              )
              // and again
              .put(ProcessApproveRequest.Elements.AMEND_REQUEST, Lists.newArrayList(
                ProcessApproveRequest.Variables.REQUEST_ID,
                ProcessApproveRequest.Variables.COMMENT,
                ProcessApproveRequest.Variables.APPLICANT)
              ).build()
          ),
          // optionally add a global filter for all processes
          // for that no individual filter was created
          new ProcessVariableFilter(FilterType.INCLUDE,
            Lists.newArrayList(CommonProcessVariables.CUSTOMER_ID))
        }
      );
    }

  }</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you want to implement a custom enrichment, please provide your own implementation of the interface <code>VariablesEnricher</code>
(register a Spring Component of the type) and set the property <code>camunda.taskpool.collector.task.enricher.type</code> to <code>custom</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_correlation">Data Correlation</h3>
<div class="paragraph">
<p>Apart from task payload attached by the enricher, the so-called <em>Correlation</em> with data entries can
be configured. The data correlation allows to attach one or several references (that is a pair of values <code>entryType</code> and <code>entryId</code>) of
business data entry(ies) to a task. In the projection (which is used for querying of tasks) this correlations is be resolved and the
information from business data events can be shown together with task information.</p>
</div>
<div class="paragraph">
<p>The correlation to data events can be configured by providing a <code>ProcessVariablesCorrelator</code> bean. Here is
an example how this can be done:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">@Bean
fun processVariablesCorrelator() = ProcessVariablesCorrelator(

  ProcessVariableCorrelation(ProcessApproveRequest.KEY, <b class="conum">(1)</b>
    mapOf(
      ProcessApproveRequest.Elements.APPROVE_REQUEST to mapOf( <b class="conum">(2)</b>
        ProcessApproveRequest.Variables.REQUEST_ID to BusinessDataEntry.REQUEST
      )
    ),
    mapOf(ProcessApproveRequest.Variables.REQUEST_ID to BusinessDataEntry.REQUEST) <b class="conum">(3)</b>
  )
)</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>define correlation for every process</p>
</li>
<li>
<p>define a correlation for every task needed</p>
</li>
<li>
<p>define a correlation globally (for the whole process)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The process variable correlator holds a list of process variable correlations - one for every process
definition key. Every <code>ProcessVariableCorrelation</code> configures for all tasks or for an individual taskby providing a so-called correlation
map. A correlation map is keyed by the name of a process variable inside Camunda Process Engine and holds the type of business data entry as value.</p>
</div>
<div class="paragraph">
<p>Here is an example. Imagine the process instance is storing the id of an approval request in a process variable called
<code>varRequestId</code>. The system responsible for storing approval requests fires data entry events supplying the
data and using the entry type <code>io.my.approvalRequest</code> and the id of the request as <code>entryId</code>. In order to
create a correlation in task <code>task_approve_request</code> of the <code>process_approval_process</code> we would provide the following configuration
of the correlator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">@Bean
fun processVariablesCorrelator() = ProcessVariablesCorrelator(

  ProcessVariableCorrelation("process_approval_process",
    mapOf(
      "task_approve_request" to mapOf(
        "varRequestId" to "io.my.approvalRequest" // process variable 'varRequestId' holds the id of a data entry of type 'io.my.approvalRequest'
      )
    )
  )
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the process instance now contains the approval request id <code>"4711"</code> in the process variable <code>varRequestId</code>
and the process reaches the task <code>task_approve_request</code>, the task will get the following correlation created
(here written in JSON):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">"correlations": [
  { "entryType": "approvalRequest", "entryId": "4711" }
]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_command_aggregation">Command aggregation</h3>
<div class="paragraph">
<p>In order to control sending of commands to command sender, the command sender activation property
<code>camunda.taskpool.collector.task.enabled</code> is available. If disabled, the command sender
will log any command instead of aggregating sending it to the command gateway.</p>
</div>
<div class="paragraph">
<p>In addition you can control by the property <code>camunda.taskpool.collector.task.sender.type</code> if you want to use the default command sender or provide your own implementation.
The default provided command sender (type: <code>tx</code>) is collects all task commands during one transaction, group them by task id
and accumulates by creating one command reflecting the intent of the task operation. It uses Axon Command Bus (encapsulated
by the <code>AxonCommandListGateway</code> for sending the result over to the Axon command gateway.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you want to implement a custom command sending, please provide your own implementation of the interface <code>EngineTaskCommandSender</code>
(register a Spring Component of the type) and set the property <code>camunda.taskpool.collector.task.sender.type</code> to <code>custom</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Spring event listeners receiving events from the Camunda Engine plugin are called before the engine commits the transaction.
Since all processing inside collector component and enricher is performed synchronously, the sender must waits until transaction to
be successfully committed before sending any commands to the Command Gateway. Otherwise, on any error
the transaction would be rolled back and the command would create an inconsistency between the taskpool and the engine.</p>
</div>
<div class="paragraph">
<p>Depending on your deployment scenario, you may want to control the exact point in time when the commands are send to command gateway.
The property <code>camunda.taskpool.collector.task.sender.send-within-transaction</code> is designed to influence this. If set to <code>true</code>, the commands
are sent <em>before</em> the process engine transaction is committed, otherwise commands are sent <em>after</em> the process engine transaction is committed.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Never send commands over remote messaging before the transaction is committed, since you may produce unexpected results if Camunda fails
to commit the transaction.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_handling_command_transmission">Handling command transmission</h4>
<div class="paragraph">
<p>The commands sent via gateway (e.g. <code>AxonCommandListGateway</code>) are received by Command Handlers. The latter may accept or reject commands, depending
on the state of the aggregate and other components. The <code>AxonCommandListGateway</code> is informed about the command outcome. By default, it will log the outcome
to console (success is logged in <code>DEBUG</code> log level, errors are using <code>ERROR</code> log level).</p>
</div>
<div class="paragraph">
<p>In some situations it is required to take care of command outcome. A prominent example is to include a metric for command dispatching errors into monitoring. For doing so, it is possible to provide own handlers for success and error command outcome. For this purpose, please provide a Spring Bean implementing the <code>CommandSuccessHandler`and `CommandErrorHandler</code> accordingly.</p>
</div>
<div class="paragraph">
<p>Here is an example, how such a handler may look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">  @Bean
  @Primary
  fun taskCommandErrorHandler(): TaskCommandErrorHandler = object : LoggingTaskCommandErrorHandler(logger) {
    override fun apply(commandMessage: Any, commandResultMessage: CommandResultMessage&lt;out Any?&gt;) {
      logger.info { "&lt;--------- CUSTOM ERROR HANDLER REPORT ---------&gt;" }
      super.apply(commandMessage, commandResultMessage)
      logger.info { "&lt;------------------- END -----------------------&gt;" }
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_properties_overview">Configuration properties overview</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Title</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cell in column 1, row 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cell in column 2, row 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cell in column 3, row 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cell in column 1, row 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cell in column 2, row 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cell in column 3, row 2</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
                    
                
            
        
    
    <!-- end:inject components -->


        
        </div>

        <!-- Page navigation
        =========================================== -->
        <div class="col-md-3" role="complementary">
        <div class="bs-docs-sidebar hidden-print" id="bs-docs-sidebar">
    <section id="search" >
        <form data-orchid-search="">
            <div class="input-group">
                <input type="text" name="query" id="query" class="form-control" placeholder="Search&hellip;">
                <span class="input-group-btn"><button type="submit" class="btn btn-default">Go</button></span>
            </div>
        </form>
        <div id="search-results" data-orchid-search-results style="display: none;">
            <b>Search Results</b>
            <ul></ul>
        </div>
        <div id="search-progress" data-orchid-search-progress style="display: none;">
            <div class="loader">Loading...</div>
        </div>
    </section>

    <ul class="nav bs-docs-sidenav">
        
        
            
                
                    <li><a class="divider-subheader">In This Page</a></li>
                
            
        
        
            
                <li class="has-children ">
                    <a>Taskpool Collector</a>
                    <ul class="nav">
                        
                        
                            
                                <li class="">
                                    <a href="#_purpose">Purpose</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="#_features">Features</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="#_architecture">Architecture</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="#_usage_and_configuration">Usage and configuration</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="#_event_collection">Event collection</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="#_task_commands_enrichment">Task commands enrichment</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="#_data_correlation">Data Correlation</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="#_command_aggregation">Command aggregation</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="#_configuration_properties_overview">Configuration properties overview</a>
                                </li>
                            
                        
                    </ul>
                </li>
            
        
        
            
                
                    <li><a class="divider-subheader">User Guide</a></li>
                
            
        
        
            
                
                    <li class=""><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example">Example Application</a></li>
                
            
        
        
            
                <li class="has-children ">
                    <a>Example Components</a>
                    <ul class="nav">
                        
                        <li>
                            <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example-components">Overview</a>
                        </li>
                        
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example-components/pa-frontend">Process Application Frontend</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example-components/pa-backend">Process Application Backend</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example-components/user-management">User Management</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example-components/pp-frontend">Process Platform Frontend</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/example-components/pp-backend">Process Platform Backend</a>
                                </li>
                            
                        
                    </ul>
                </li>
            
        
        
            
                <li class="has-children ">
                    <a>Usage Scenarios</a>
                    <ul class="nav">
                        
                        <li>
                            <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/scenarios">Overview</a>
                        </li>
                        
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/scenarios/single-node">Scenario for running on a single node</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/scenarios/distributed-axon-server">Distributed Scenario using Axon Server</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/scenarios/distributed-no-axon-server">Scenario without Axon Server</a>
                                </li>
                            
                        
                    </ul>
                </li>
            
        
        
            
                
                    <li class=""><a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/integration-guide">Integration Guide</a></li>
                
            
        
        
            
                <li class="has-children active">
                    <a>Taskpool Components</a>
                    <ul class="nav">
                        
                        <li>
                            <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components">Overview</a>
                        </li>
                        
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-starter">Camunda Engine Taskpool Support SpringBoot Starter</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-interaction-client">Camunda Engine Interaction Client</a>
                                </li>
                            
                        
                            
                                <li class="active">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-taskpool-collector">Taskpool Collector</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-datapool-collector">Datapool Collector</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/core-taskpool">Taskpool Core</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/core-datapool">Datapool Core</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/view-simple">In-Memory View</a>
                                </li>
                            
                        
                            
                                <li class="">
                                    <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/view-mongo">Mongo View</a>
                                </li>
                            
                        
                    </ul>
                </li>
            
        
    </ul>

    
    <!-- start:inject components -->
    
    <!-- end:inject components -->



    <a class="back-to-top" href="#top">
        <i class="glyphicon glyphicon-chevron-up"></i> Back to top
    </a>
</div>

        </div>
    </div>
</div>


<div id="footer">
    <div class="container bs-docs-container">
    <footer class="bs-docs-footer" role="contentinfo">
    <div class="row">
        <div class="col-xs-12">
            <nav aria-label="navigateClasses">
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-interaction-client">
                                <span aria-hidden="true">&larr;</span>
                                <span>Camunda Engine Interaction Client</span>
                            </a>
                        </li>
                    

                    
                        <li class="next">
                            <a href="https://www.holunda.io/camunda-bpm-taskpool/wiki/user-guide/components/engine-datapool-collector">
                                <span>Datapool Collector</span>
                                <span aria-hidden="true">&rarr;</span>
                            </a>
                        </li>
                    
                </ul>
            </nav>
        </div>
    </div>
    <div class="icons">
    
    
        <a href="https://www.holunda.io/camunda-bpm-taskpool/" class="fa fas fa-home"></a>
    
        <a href="https://github.com/holunda-io/camunda-bpm-taskpool" class="fa fa-github"></a>
    
        <a href="https://twitter.com/holisticon" class="fa fa-twitter"></a>
    
    
    </div>
    <br>
    <p>
    Documentation template based on the
    <a href="https://github.com/mistic100/jekyll-bootstrap-doc">Jekyll Bootstrap Doc</a>
    Jekyll theme by the <a href="https://getbootstrap.com">Bootstrap team</a>. Site created with
    <a href="https://orchid.run">Orchid</a>.
</p>


</footer>
    </div>
</div>


<!-- start:inject scripts -->
<script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script  src="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.3.0/bootbox.min.js"></script>
<script  src="https://www.holunda.io/camunda-bpm-taskpool/BsDoc/b5276d0/assets/js/bsdoc.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-yaml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-java.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-json.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-kotlin.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-markdown.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/line-highlight/prism-line-highlight.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/toolbar/prism-toolbar.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/show-language/prism-show-language.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<!-- end:inject scripts -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>

<script>
    $(function () {
        window.colors = ['#16480c', '#000000'];
                  
    
        geopattern('Taskpool Collector');
    

        buildNav();
    });
</script>

</body>
</html>